<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template 02</title>
    <style>
        @import url(//fonts.googleapis.com/earlyaccess/hanna.css);

        ul {
            list-style: none;
        }

        main {
            background-color: slategray;
            border-right: lightslategray;
            border-right: 10px;
        }

        p {
            font-family: 'Hanna';
            color: snow;
        }

        li {
            font-family: 'Hanna';
            color: snow;
        }
    </style>
    <?php
        include("database.php");
    ?>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

    <!--- 기본적인 변수들 선언과 체크박스 기능 --->
    <script>
        var actOrigin = [];
        var placeOrigin = [];
        var restOrigin = [];
        var ctgrRest = [];
        var ctgrAct = [];
        var ctgrPlace = [];
        var top5 = [];
        var top5Origin = [];

        // Attach: parameter > 각 카테고리의 하위 체크박스
        // Function: 체크 / 체크해제 하면 각 카테고리를 위한 array에 값이 추가 / 삭제 된다.
        function attach(val) {
            if (val.checked == true) {
                if (val.name == "ctgrRest[]") {
                    ctgrRest.push(val.value);
                    ctgrRest.sort();
                }
                else if (val.name == "ctgrAct[]") {
                    ctgrAct.push(val.value);
                    ctgrAct.sort();
                }
                else {
                    ctgrPlace.push(val.value);
                    ctgrPlace.sort();
                }
            }
            else {
                if (val.name == "ctgrRest[]") {
                    const i = ctgrRest.indexOf(val.value);
                    if (i > -1) ctgrRest.splice(i, 1);
                    ctgrRest.sort();
                }
                else if (val.name == "ctgrAct[]") {
                    const i = ctgrAct.indexOf(val.value);
                    if (i > -1) ctgrAct.splice(i, 1);
                    ctgrAct.sort();
                }
                else {
                    const i = ctgrPlace.indexOf(val.value);
                    if (i > -1) ctgrPlace.splice(i, 1);
                    ctgrPlace.sort();
                }
            }
            console.log(ctgrRest);
            console.log(ctgrAct);
            console.log(ctgrPlace);
        }

        //checkUnder: parameter > name 이 ctgr 인 체크박스
        //Function: name이 ctgr인 체크박스를 체크 / 체크해제하면 하위 체크박스들도 체크 / 체크 해제된다.
        function checkUnder(val) {
            switch (val.id) {
                case "restaurantCheck":
                    var under = document.getElementsByName("ctgrRest[]");
                    under.forEach(element => {
                        element.checked = val.checked;
                        attach(element);
                    });
                    break;
                case "activityCheck":
                    var under = document.getElementsByName("ctgrAct[]");
                    under.forEach(element => {
                        element.checked = val.checked;
                        attach(element);
                    });
                    break;
                case "placeCheck":
                    var under = document.getElementsByName("ctgrPlace[]");
                    under.forEach(element => {
                        element.checked = val.checked;
                        attach(element);
                    });
                    break;
                default:
                    alert("Error");
                    break;
            }
        }

        //checkUpper: parameter > name 이 ctgrRest / ctgrAct / ctgrPlace 인 체크박스
        //Function: name 이 ctgrRest / ctgrAct / ctgrPlace 인 체크박스들을 체크 / 체크해제하면 상위 체크박스도 체크 / 체크 해제된다.
        function checkUpper(val) {
            attach(val);
            switch (val.name) {
                case "ctgrRest[]":
                    var upper = document.getElementById("restaurantCheck");
                    upper.checked = val.checked;
                    break;
                case "ctgrAct[]":
                    var upper = document.getElementById("activityCheck");
                    upper.checked = val.checked;
                    break;
                case "ctgrPlace[]":
                    var upper = document.getElementById("placeCheck");
                    upper.checked = val.checked;
                    break;
                default:
                    alert("Error");
                    break;
            }

        }

    </script>
</head>

<body id="body" style="background-color: black;">
    <!-- 좌측 카테고리 선택 부분 -->
    <div style="
    background-color: rgb(52, 46, 59);
    border-right: 1px solid;
    border-right-color: rgb(172, 172, 172);
    width: 400px;
    height: 1200px;
    float: left;
    ">
        <p onclick="location.href='//222.106.121.250/Template_02/index.html'" style="
    font-size: 30px;
    font-weight: 300;
    margin-left: 10px;
    ">TEAM 04</p>
        <!-- 카테고리 체크박스  159 ~ 233 -->
        <ul style="
    width: 100%;
    padding-left: 0px;
    ">
            <p style="
        font-size: 20px;
        text-align: center;
        ">
                CATEGORY
            </p>
            <li style="
        height: 200px;
        ">
                <div style="height: 50px;">
                    <input type="checkbox" name="ctgr[]" id="restaurantCheck" size=10 value="restaurant"
                        onclick="checkUnder(this)">
                    <label style="height: 50px;" for="restaurantCheck" style="margin-left: 25px;">Restaurants</label>
                </div>
                <ul>
                    <?php
            foreach ($ctgrRest as $ctgrName) {
                echo '<li style= "width: 180px; height: 30px; float: left;">';
                echo '<input type= "checkbox" name= "ctgrRest[]" id= "'.$ctgrName;
                echo 'Check" size= 20 value= "'.$ctgrName.'" onclick="checkUpper(this)">';
                echo '<label for= "'.$ctgrName.'Check" style="margin-left: 25px;">'.$ctgrName.'</label>';
                echo '</li>';
            }
            ?>
                </ul>
            </li>
            <br />
            <li style="
        height: 200px;
        ">
                <div style="height: 50px;">
                    <input type="checkbox" name="ctgr[]" id="activityCheck" size=10 value="activity"
                        onclick="checkUnder(this)">
                    <label style="height: 50px;" for="activityCheck" style="margin-left: 25px;">Activities</label>
                </div>
                <ul>
                    <?php
            foreach ($ctgrAct as $ctgrName) {
                echo '<li style= "width: 180px; height: 30px; float: left;">';
                echo '<input type= "checkbox" name= "ctgrAct[]" id= "'.$ctgrName;
                echo 'Check" size= 20 value= "'.$ctgrName.'" onclick="checkUpper(this)">';
                echo '<label for= "'.$ctgrName.'Check" style="margin-left: 25px;">'.$ctgrName.'</label>';
                echo '</li>';
            }
            ?>
                </ul>
            </li>
            <br />
            <li style="
        height: 200px;
        ">
                <div style="height: 50px;">
                    <input type="checkbox" name="ctgr[]" id="placeCheck" size=10 value="place"
                        onclick="checkUnder(this)">
                    <label style="height: 50px;" for="placeCheck" style="margin-left: 25px;">Places</label>
                </div>
                <ul>
                    <?php
            foreach ($ctgrPlace as $ctgrName) {
                echo '<li style= "width: 180px; height: 30px; float: left;">';
                echo '<input type= "checkbox" name= "ctgrPlace[]" id= "'.$ctgrName;
                echo 'Check" size= 20 value= "'.$ctgrName.'" onclick="checkUpper(this)">';
                echo '<label for= "'.$ctgrName.'Check" style="margin-left: 25px;">'.$ctgrName.'</label>';
                echo '</li>';
            }
            ?>
                </ul>
            </li>
            <br />
        </ul>
        <!-- 결과 버튼 + ajax 기능들 234 ~ 1405 -->
        <input type="button" id="Result" value="R   E   S   U   L   T" style="
    float: right;
    margin-right: 20px;
    margin-top: 80px;
    width: 180px;
    height: 60px;
    background-color: rgb(15, 52, 88);
    font-family: 'Hanna';
    font-size: 20px;
    color: snow;
    border: 2px solid snow;
    ">

        <!-- AJAX: 결과 버튼을 눌렀을 때 기능 -->
        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script>
            $(function () {
                // 막대 + 선 + Top5 역 리스트
                $('#Result').on('click', function () {
                    actOrigin = ctgrAct.slice(0);
                    placeOrigin = ctgrPlace.slice(0);
                    restOrigin = ctgrRest.slice(0);
                    for (var i = 0; i < actOrigin.length; i++) {
                        actOrigin[i] = '\'' + actOrigin[i] + '\'';
                    }
                    for (var i = 0; i < placeOrigin.length; i++) {
                        placeOrigin[i] = '\'' + placeOrigin[i] + '\'';
                    }
                    for (var i = 0; i < restOrigin.length; i++) {
                        restOrigin[i] = '\'' + restOrigin[i] + '\'';
                    }
                    actOrigin = actOrigin.join(', ');
                    placeOrigin = placeOrigin.join(', ');
                    restOrigin = restOrigin.join(', ');

                    // 막대그래프 + Top5 역 리스트
                    $.ajax({
                        url: 'http://222.106.121.250/Template_02/showResult.php',
                        type: 'POST',
                        traditional: true,
                        dataType: 'json',
                        data: {
                            "ctgrRest": restOrigin,
                            "ctgrAct": actOrigin,
                            "ctgrPlace": placeOrigin
                        },
                        success: function (data) {
                            // 막대그래프
                            var prev = document.getElementById("barGraph");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);
                            var newone = document.createElement("canvas");
                            newone.setAttribute("id", "barGraph");
                            newone.setAttribute("style", "align-content: center; width: 500px; height: 440px");
                            parent.appendChild(newone);
                            var ex01 = document.getElementById("barGraph").getContext('2d');
                            var chart01 = new Chart(ex01, {
                                type: 'bar',
                                data: {
                                    labels: Object.keys(data),
                                    datasets: [{
                                        label: 'Number of stores',
                                        data: Object.values(data),
                                        backgroundColor: [
                                            'rgba(255, 250, 250, 0.5)',
                                            'rgba(255, 250, 250, 0.5)',
                                            'rgba(255, 250, 250, 0.5)',
                                            'rgba(255, 250, 250, 0.5)',
                                            'rgba(255, 250, 250, 0.5)',
                                            'rgba(255, 99, 132, 0.5)'
                                        ],
                                        borderColor: [
                                            'rgba(255, 250, 250, 1)',
                                            'rgba(255, 250, 250, 1)',
                                            'rgba(255, 250, 250, 1)',
                                            'rgba(255, 250, 250, 1)',
                                            'rgba(255, 250, 250, 1)',
                                            'rgba(255, 99, 132, 1)'
                                        ],
                                        borderWidth: 1
                                    }
                                    ]
                                },
                                options: {
                                    maintainAspectRatio: true, // default value. false일 경우 포함된 div의 크기에 맞춰서 그려짐.
                                    scales: {
                                        xAxes: [{
                                            ticks: {
                                                fontColor: 'rgb(255, 250, 250)'
                                            }
                                        }],
                                        yAxes: [{
                                            ticks: {
                                                fontColor: 'rgb(255, 250, 250)',
                                                beginAtZero: true
                                            }
                                        }]
                                    },
                                    legend: {
                                        labels: {
                                            fontColor: 'rgb(255, 250, 250)'
                                        }
                                    }
                                }
                            });

                            top5 = [];
                            top5Origin = [];
                            top5 = Object.keys(data).slice(0, 5);
                            top5Origin = top5.slice(0);
                            top5Origin = top5Origin.join(', ');

                            // Top5 역
                            var prev = document.getElementById("contextList");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "contextList");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;

                            for (var i = 0; i < 5; i++) {
                                var listInput = document.createElement("input");
                                listInput.setAttribute("id", "top" + i);
                                listInput.setAttribute("type", "button");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + top5[i]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 10px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            restOrigin = [];
                            actOrigin = [];
                            placeOrigin = [];
                        },
                        error: function (request, status, error) {
                            alert("code:" + request.status + "\n" + "message:" + request.responseText + "\n" + "error:" + error);
                        }
                    })

                    // 선 그래프
                    $.ajax({
                        url: 'http://222.106.121.250/Template_02/showResult_02.php',
                        type: 'POST',
                        traditional: true,
                        dataType: 'json',
                        data: {
                            "station": top5Origin
                        },
                        success: function (data) {
                            var prev = document.getElementById("lineGraph");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);
                            var newone = document.createElement("canvas");
                            newone.setAttribute("id", "lineGraph");
                            newone.setAttribute("style", "align-content: center; width: 500px; height: 440px");
                            parent.appendChild(newone);
                            var ex01 = document.getElementById("lineGraph").getContext('2d');
                            var chart01 = new Chart(ex01, {
                                type: 'line',
                                data: {
                                    labels: [-5, -4, -3, -2, -1, 0],
                                    datasets: [{
                                        label: top5[0],
                                        data: Object.values(data)[0],
                                        backgroundColor: [
                                            'rgba(255, 250, 250, 0.05)'
                                        ],
                                        borderColor: [
                                            'rgba(255, 199, 132, 1)'
                                        ],
                                        borderWidth: 1.5
                                    }, {
                                        label: top5[1],
                                        data: Object.values(data)[1],
                                        backgroundColor: [
                                            'rgba(255, 250, 250, 0.05)'
                                        ],
                                        borderColor: [
                                            'rgba(135, 204, 193, 1)'
                                        ],
                                        borderWidth: 1.5
                                    }, {
                                        label: top5[2],
                                        data: Object.values(data)[2],
                                        backgroundColor: [
                                            'rgba(255, 250, 250, 0.05)'
                                        ],
                                        borderColor: [

                                            'rgba(221, 142, 188, 1)'
                                        ],
                                        borderWidth: 1.5
                                    }, {
                                        label: top5[3],
                                        data: Object.values(data)[3],
                                        backgroundColor: [
                                            'rgba(255, 250, 250, 0.05)'
                                        ],
                                        borderColor: [
                                            'rgba(228, 216, 150, 1)'
                                        ],
                                        borderWidth: 1.5
                                    }, {
                                        label: top5[4],
                                        data: Object.values(data)[4],
                                        backgroundColor: [
                                            'rgba(255, 250, 250, 0.05)'
                                        ],
                                        borderColor: [
                                            'rgba(186, 149, 228, 1)'
                                        ],
                                        borderWidth: 1.5
                                    }
                                    ]
                                },
                                options: {
                                    scales: {
                                        xAxes: [{
                                            ticks: {
                                                fontColor: 'rgb(255, 250, 250)'
                                            }
                                        }],
                                        yAxes: [{
                                            ticks: {
                                                fontColor: 'rgb(255, 250, 250)',
                                                beginAtZero: true
                                            }
                                        }]
                                    },
                                    legend: {
                                        labels: {
                                            fontColor: 'rgb(255, 250, 250)'
                                        }
                                    }
                                }
                            });
                        },
                        error: function (request, status, error) {
                            alert("code:" + request.status + "\n" + "message:" + request.responseText + "\n" + "error:" + error);
                        }

                    })

                });
                // 역, 카테고리별 Top 5: 총 15개
                $(document).on('click', "#top0", function () {
                    actOrigin = ctgrAct.slice(0);
                    placeOrigin = ctgrPlace.slice(0);
                    restOrigin = ctgrRest.slice(0);
                    var station = '\'' + top5[0] + '\'';
                    for (var i = 0; i < actOrigin.length; i++) {
                        actOrigin[i] = '\'' + actOrigin[i] + '\'';
                    }
                    for (var i = 0; i < placeOrigin.length; i++) {
                        placeOrigin[i] = '\'' + placeOrigin[i] + '\'';
                    }
                    for (var i = 0; i < restOrigin.length; i++) {
                        restOrigin[i] = '\'' + restOrigin[i] + '\'';
                    }
                    actOrigin = actOrigin.join(', ');
                    placeOrigin = placeOrigin.join(', ');
                    restOrigin = restOrigin.join(', ');

                    $.ajax({
                        url: 'http://222.106.121.250/Template_02/top5_button.php',
                        type: 'POST',
                        traditional: true,
                        dataType: 'json',
                        data: {
                            "ctgrRest": restOrigin,
                            "ctgrAct": actOrigin,
                            "ctgrPlace": placeOrigin,
                            "station": station
                        },
                        success: function (data) {

                            // Change Current Station name
                            var stationName = document.getElementById("currentStation");
                            stationName.innerHTML = top5[0] + " Station";

                            // 1. Activities
                            var prev = document.getElementById("top5Act");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "top5Act");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;
                            if (data[0].length < 5) {
                                dataLen = data[0].length;
                            }

                            for (var i = 0; i < dataLen; i++) {
                                var listInput = document.createElement("button");
                                listInput.setAttribute("id", "Act" + i);
                                listInput.setAttribute("onclick", "location.href= '" + data[0][i][2] + "'");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + data[0][i][0]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 40px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            // 2. Places
                            var prev = document.getElementById("top5Place");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "top5Place");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;
                            if (data[1].length < 5) {
                                dataLen = data[1].length;
                            }

                            for (var i = 0; i < dataLen; i++) {
                                var listInput = document.createElement("button");
                                listInput.setAttribute("id", "Place" + i);
                                listInput.setAttribute("onclick", "location.href= '" + data[1][i][2] + "'");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + data[1][i][0]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 40px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            // 3. Restaurants
                            var prev = document.getElementById("top5Rest");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "top5Rest");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;
                            if (data[2].length < 5) {
                                dataLen = data[2].length;
                            }

                            for (var i = 0; i < dataLen; i++) {
                                var listInput = document.createElement("button");
                                listInput.setAttribute("id", "Rest" + i);
                                listInput.setAttribute("onclick", "location.href= '" + data[2][i][2] + "'");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + data[2][i][0]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 40px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            // Reset containers
                            restOrigin = [];
                            actOrigin = [];
                            placeOrigin = [];

                            // 4. Pie chart
                            var countCategories = [];
                            for (var i = 0; i < data.length; i++) {
                                countCategories[i] = data[i].length;
                            }
                            var prev = document.getElementById("pieGraph");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("canvas");
                            newone.setAttribute("id", "pieGraph");
                            newone.setAttribute("style", "align-content: center; width: 220px; height: 388px; position: absolute; margin-left: 40px; margin-top: 52px;");
                            newone.setAttribute("width", "220");
                            newone.setAttribute("height", "388");                            
                            parent.appendChild(newone);

                            var ex01 = document.getElementById("pieGraph").getContext('2d');
                            var chart01 = new Chart(ex01, {
                                type: 'pie',
                                data: {
                                    labels: ['Activities', 'Places', 'Restaurants'],
                                    datasets: [{
                                        data: countCategories,
                                        backgroundColor: [
                                            'rgba(135, 204, 193, 0.5)',
                                            'rgba(221, 142, 188, 0.5)',
                                            'rgba(228, 216, 150, 0.5)'
                                        ],
                                        borderColor: [
                                            'rgba(135, 204, 193, 1)',
                                            'rgba(221, 142, 188, 1)',
                                            'rgba(228, 216, 150, 1)'
                                        ],
                                        borderWidth: 1
                                    }
                                    ]
                                },
                                options: {
                                    responsive: false, // default value. false일 경우 포함된 div의 크기에 맞춰서 그려짐.
                                    legend: {
                                        labels: {
                                            fontColor: 'rgb(255, 250, 250)'
                                        }
                                    }
                                }
                            });

                            // 5. Word Cloud
                            var prev = document.getElementById("wordCloud");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("img");
                            newone.setAttribute("id", "wordCloud");
                            newone.setAttribute("src", "image/wordCloud/" + top5[0] + " Station.png");
                            newone.setAttribute("width", "400");
                            newone.setAttribute("height", "388");
                            newone.setAttribute("style", "align-content: center; width: 380px; height: 348px; position: absolute; margin-left: 310px; margin-top: 82px;");
                            parent.appendChild(newone);



                        },
                        error: function (request, status, error) {
                            alert("code:" + request.status + "\n" + "message:" + request.responseText + "\n" + "error:" + error);
                        }
                    })
                });
                $(document).on('click', "#top1", function () {
                    actOrigin = ctgrAct.slice(0);
                    placeOrigin = ctgrPlace.slice(0);
                    restOrigin = ctgrRest.slice(0);
                    var station = '\'' + top5[1] + '\'';
                    for (var i = 0; i < actOrigin.length; i++) {
                        actOrigin[i] = '\'' + actOrigin[i] + '\'';
                    }
                    for (var i = 0; i < placeOrigin.length; i++) {
                        placeOrigin[i] = '\'' + placeOrigin[i] + '\'';
                    }
                    for (var i = 0; i < restOrigin.length; i++) {
                        restOrigin[i] = '\'' + restOrigin[i] + '\'';
                    }
                    actOrigin = actOrigin.join(', ');
                    placeOrigin = placeOrigin.join(', ');
                    restOrigin = restOrigin.join(', ');

                    $.ajax({
                        url: 'http://222.106.121.250/Template_02/top5_button.php',
                        type: 'POST',
                        traditional: true,
                        dataType: 'json',
                        data: {
                            "ctgrRest": restOrigin,
                            "ctgrAct": actOrigin,
                            "ctgrPlace": placeOrigin,
                            "station": station
                        },
                        success: function (data) {

                            // Change Current Station name
                            var stationName = document.getElementById("currentStation");
                            stationName.innerHTML = top5[1] + " Station";

                            // 1. Activities
                            var prev = document.getElementById("top5Act");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "top5Act");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;
                            if (data[0].length < 5) {
                                dataLen = data[0].length;
                            }

                            for (var i = 0; i < dataLen; i++) {
                                var listInput = document.createElement("button");
                                listInput.setAttribute("id", "Act" + i);
                                listInput.setAttribute("onclick", "location.href= '" + data[0][i][2] + "'");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + data[0][i][0]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 40px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            // 2. Places
                            var prev = document.getElementById("top5Place");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "top5Place");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;
                            if (data[1].length < 5) {
                                dataLen = data[1].length;
                            }

                            for (var i = 0; i < dataLen; i++) {
                                var listInput = document.createElement("button");
                                listInput.setAttribute("id", "Place" + i);
                                listInput.setAttribute("onclick", "location.href= '" + data[1][i][2] + "'");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + data[1][i][0]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 40px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            // 3. Restaurants
                            var prev = document.getElementById("top5Rest");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "top5Rest");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;
                            if (data[2].length < 5) {
                                dataLen = data[2].length;
                            }

                            for (var i = 0; i < dataLen; i++) {
                                var listInput = document.createElement("button");
                                listInput.setAttribute("id", "Rest" + i);
                                listInput.setAttribute("onclick", "location.href= '" + data[2][i][2] + "'");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + data[2][i][0]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 40px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            // Reset containers
                            restOrigin = [];
                            actOrigin = [];
                            placeOrigin = [];

                            // 4. Pie chart
                            var countCategories = [];
                            for (var i = 0; i < data.length; i++) {
                                countCategories[i] = data[i].length;
                            }
                            var prev = document.getElementById("pieGraph");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("canvas");
                            newone.setAttribute("id", "pieGraph");
                            newone.setAttribute("style", "align-content: center; width: 220px; height: 388px; position: absolute; margin-left: 40px; margin-top: 52px;");
                            newone.setAttribute("width", "220");
                            newone.setAttribute("height", "388");                            parent.appendChild(newone);

                            var ex01 = document.getElementById("pieGraph").getContext('2d');
                            var chart01 = new Chart(ex01, {
                                type: 'pie',
                                data: {
                                    labels: ['Activities', 'Places', 'Restaurants'],
                                    datasets: [{
                                        data: countCategories,
                                        backgroundColor: [
                                            'rgba(135, 204, 193, 0.5)',
                                            'rgba(221, 142, 188, 0.5)',
                                            'rgba(228, 216, 150, 0.5)'
                                        ],
                                        borderColor: [
                                            'rgba(135, 204, 193, 1)',
                                            'rgba(221, 142, 188, 1)',
                                            'rgba(228, 216, 150, 1)'
                                        ],
                                        borderWidth: 1
                                    }
                                    ]
                                },
                                options: {
                                    responsive: false, // default value. false일 경우 포함된 div의 크기에 맞춰서 그려짐.
                                    legend: {
                                        labels: {
                                            fontColor: 'rgb(255, 250, 250)'
                                        }
                                    }
                                }
                            });

                            // 5. Word Cloud
                            var prev = document.getElementById("wordCloud");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("img");
                            newone.setAttribute("id", "wordCloud");
                            newone.setAttribute("src", "image/wordCloud/" + top5[1] + " Station.png");
                            newone.setAttribute("width", "400");
                            newone.setAttribute("height", "388");
                            newone.setAttribute("style", "align-content: center; width: 380px; height: 348px; position: absolute; margin-left: 310px; margin-top: 82px;");
                            parent.appendChild(newone);
                        },
                        error: function (request, status, error) {
                            alert("code:" + request.status + "\n" + "message:" + request.responseText + "\n" + "error:" + error);

                        }
                    })
                });
                $(document).on('click', "#top2", function () {
                    actOrigin = ctgrAct.slice(0);
                    placeOrigin = ctgrPlace.slice(0);
                    restOrigin = ctgrRest.slice(0);
                    var station = '\'' + top5[2] + '\'';
                    for (var i = 0; i < actOrigin.length; i++) {
                        actOrigin[i] = '\'' + actOrigin[i] + '\'';
                    }
                    for (var i = 0; i < placeOrigin.length; i++) {
                        placeOrigin[i] = '\'' + placeOrigin[i] + '\'';
                    }
                    for (var i = 0; i < restOrigin.length; i++) {
                        restOrigin[i] = '\'' + restOrigin[i] + '\'';
                    }
                    actOrigin = actOrigin.join(', ');
                    placeOrigin = placeOrigin.join(', ');
                    restOrigin = restOrigin.join(', ');

                    $.ajax({
                        url: 'http://222.106.121.250/Template_02/top5_button.php',
                        type: 'POST',
                        traditional: true,
                        dataType: 'json',
                        data: {
                            "ctgrRest": restOrigin,
                            "ctgrAct": actOrigin,
                            "ctgrPlace": placeOrigin,
                            "station": station
                        },
                        success: function (data) {

                            // Change Current Station name
                            var stationName = document.getElementById("currentStation");
                            stationName.innerHTML = top5[2] + " Station";

                            // 1. Activities
                            var prev = document.getElementById("top5Act");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "top5Act");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;
                            if (data[0].length < 5) {
                                dataLen = data[0].length;
                            }

                            for (var i = 0; i < dataLen; i++) {
                                var listInput = document.createElement("button");
                                listInput.setAttribute("id", "Act" + i);
                                listInput.setAttribute("onclick", "location.href= '" + data[0][i][2] + "'");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + data[0][i][0]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 40px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            // 2. Places
                            var prev = document.getElementById("top5Place");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "top5Place");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;
                            if (data[1].length < 5) {
                                dataLen = data[1].length;
                            }

                            for (var i = 0; i < dataLen; i++) {
                                var listInput = document.createElement("button");
                                listInput.setAttribute("id", "Place" + i);
                                listInput.setAttribute("onclick", "location.href= '" + data[1][i][2] + "'");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + data[1][i][0]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 40px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            // 3. Restaurants
                            var prev = document.getElementById("top5Rest");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "top5Rest");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;
                            if (data[2].length < 5) {
                                dataLen = data[2].length;
                            }

                            for (var i = 0; i < dataLen; i++) {
                                var listInput = document.createElement("button");
                                listInput.setAttribute("id", "Rest" + i);
                                listInput.setAttribute("onclick", "location.href= '" + data[2][i][2] + "'");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + data[2][i][0]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 40px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            // Reset containers
                            restOrigin = [];
                            actOrigin = [];
                            placeOrigin = [];

                            // 4. Pie chart
                            var countCategories = [];
                            for (var i = 0; i < data.length; i++) {
                                countCategories[i] = data[i].length;
                            }
                            var prev = document.getElementById("pieGraph");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("canvas");
                            newone.setAttribute("id", "pieGraph");
                            newone.setAttribute("style", "align-content: center; width: 220px; height: 388px; position: absolute; margin-left: 40px; margin-top: 52px;");
                            newone.setAttribute("width", "220");
                            newone.setAttribute("height", "388");                            parent.appendChild(newone);

                            var ex01 = document.getElementById("pieGraph").getContext('2d');
                            var chart01 = new Chart(ex01, {
                                type: 'pie',
                                data: {
                                    labels: ['Activities', 'Places', 'Restaurants'],
                                    datasets: [{
                                        data: countCategories,
                                        backgroundColor: [
                                            'rgba(135, 204, 193, 0.5)',
                                            'rgba(221, 142, 188, 0.5)',
                                            'rgba(228, 216, 150, 0.5)'
                                        ],
                                        borderColor: [
                                            'rgba(135, 204, 193, 1)',
                                            'rgba(221, 142, 188, 1)',
                                            'rgba(228, 216, 150, 1)'
                                        ],
                                        borderWidth: 1
                                    }
                                    ]
                                },
                                options: {
                                    responsive: false, // default value. false일 경우 포함된 div의 크기에 맞춰서 그려짐.
                                    legend: {
                                        labels: {
                                            fontColor: 'rgb(255, 250, 250)'
                                        }
                                    }
                                }
                            });
                            // 5. Word Cloud
                            var prev = document.getElementById("wordCloud");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("img");
                            newone.setAttribute("id", "wordCloud");
                            newone.setAttribute("src", "image/wordCloud/" + top5[2] + " Station.png");
                            newone.setAttribute("width", "400");
                            newone.setAttribute("height", "388");
                            newone.setAttribute("style", "align-content: center; width: 380px; height: 348px; position: absolute; margin-left: 310px; margin-top: 82px;");
                            parent.appendChild(newone);
                        },
                        error: function (request, status, error) {
                            alert("code:" + request.status + "\n" + "message:" + request.responseText + "\n" + "error:" + error);
                            
                        }
                    })
                });
                $(document).on('click', "#top3", function () {
                    actOrigin = ctgrAct.slice(0);
                    placeOrigin = ctgrPlace.slice(0);
                    restOrigin = ctgrRest.slice(0);
                    var station = '\'' + top5[3] + '\'';
                    for (var i = 0; i < actOrigin.length; i++) {
                        actOrigin[i] = '\'' + actOrigin[i] + '\'';
                    }
                    for (var i = 0; i < placeOrigin.length; i++) {
                        placeOrigin[i] = '\'' + placeOrigin[i] + '\'';
                    }
                    for (var i = 0; i < restOrigin.length; i++) {
                        restOrigin[i] = '\'' + restOrigin[i] + '\'';
                    }
                    actOrigin = actOrigin.join(', ');
                    placeOrigin = placeOrigin.join(', ');
                    restOrigin = restOrigin.join(', ');

                    $.ajax({
                        url: 'http://222.106.121.250/Template_02/top5_button.php',
                        type: 'POST',
                        traditional: true,
                        dataType: 'json',
                        data: {
                            "ctgrRest": restOrigin,
                            "ctgrAct": actOrigin,
                            "ctgrPlace": placeOrigin,
                            "station": station
                        },
                        success: function (data) {

                            // Change Current Station name
                            var stationName = document.getElementById("currentStation");
                            stationName.innerHTML = top5[3] + " Station";

                            // 1. Activities
                            var prev = document.getElementById("top5Act");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "top5Act");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;
                            if (data[0].length < 5) {
                                dataLen = data[0].length;
                            }

                            for (var i = 0; i < dataLen; i++) {
                                var listInput = document.createElement("button");
                                listInput.setAttribute("id", "Act" + i);
                                listInput.setAttribute("onclick", "location.href= '" + data[0][i][2] + "'");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + data[0][i][0]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 40px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            // 2. Places
                            var prev = document.getElementById("top5Place");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "top5Place");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;
                            if (data[1].length < 5) {
                                dataLen = data[1].length;
                            }

                            for (var i = 0; i < dataLen; i++) {
                                var listInput = document.createElement("button");
                                listInput.setAttribute("id", "Place" + i);
                                listInput.setAttribute("onclick", "location.href= '" + data[1][i][2] + "'");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + data[1][i][0]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 40px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            // 3. Restaurants
                            var prev = document.getElementById("top5Rest");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "top5Rest");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;
                            if (data[2].length < 5) {
                                dataLen = data[2].length;
                            }

                            for (var i = 0; i < dataLen; i++) {
                                var listInput = document.createElement("button");
                                listInput.setAttribute("id", "Rest" + i);
                                listInput.setAttribute("onclick", "location.href= '" + data[2][i][2] + "'");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + data[2][i][0]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 40px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            // Reset containers
                            restOrigin = [];
                            actOrigin = [];
                            placeOrigin = [];

                            // 4. Pie chart
                            var countCategories = [];
                            for (var i = 0; i < data.length; i++) {
                                countCategories[i] = data[i].length;
                            }
                            var prev = document.getElementById("pieGraph");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("canvas");
                            newone.setAttribute("id", "pieGraph");
                            newone.setAttribute("style", "align-content: center; width: 220px; height: 388px; position: absolute; margin-left: 40px; margin-top: 52px;");
                            newone.setAttribute("width", "220");
                            newone.setAttribute("height", "388");                            parent.appendChild(newone);

                            var ex01 = document.getElementById("pieGraph").getContext('2d');
                            var chart01 = new Chart(ex01, {
                                type: 'pie',
                                data: {
                                    labels: ['Activities', 'Places', 'Restaurants'],
                                    datasets: [{
                                        data: countCategories,
                                        backgroundColor: [
                                            'rgba(135, 204, 193, 0.5)',
                                            'rgba(221, 142, 188, 0.5)',
                                            'rgba(228, 216, 150, 0.5)'
                                        ],
                                        borderColor: [
                                            'rgba(135, 204, 193, 1)',
                                            'rgba(221, 142, 188, 1)',
                                            'rgba(228, 216, 150, 1)'
                                        ],
                                        borderWidth: 1
                                    }
                                    ]
                                },
                                options: {
                                    responsive: false, // default value. false일 경우 포함된 div의 크기에 맞춰서 그려짐.
                                    legend: {
                                        labels: {
                                            fontColor: 'rgb(255, 250, 250)'
                                        }
                                    }
                                }
                            });

                            // 5. Word Cloud
                            var prev = document.getElementById("wordCloud");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("img");
                            newone.setAttribute("id", "wordCloud");
                            newone.setAttribute("src", "image/wordCloud/" + top5[3] + " Station.png");
                            newone.setAttribute("width", "400");
                            newone.setAttribute("height", "388");
                            newone.setAttribute("style", "align-content: center; width: 380px; height: 348px; position: absolute; margin-left: 310px; margin-top: 82px;");
                            parent.appendChild(newone);
                        },
                        error: function (request, status, error) {
                            alert("code:" + request.status + "\n" + "message:" + request.responseText + "\n" + "error:" + error);

                        }
                    })
                });
                $(document).on('click', "#top4", function () {
                    actOrigin = ctgrAct.slice(0);
                    placeOrigin = ctgrPlace.slice(0);
                    restOrigin = ctgrRest.slice(0);
                    var station = '\'' + top5[4] + '\'';
                    for (var i = 0; i < actOrigin.length; i++) {
                        actOrigin[i] = '\'' + actOrigin[i] + '\'';
                    }
                    for (var i = 0; i < placeOrigin.length; i++) {
                        placeOrigin[i] = '\'' + placeOrigin[i] + '\'';
                    }
                    for (var i = 0; i < restOrigin.length; i++) {
                        restOrigin[i] = '\'' + restOrigin[i] + '\'';
                    }
                    actOrigin = actOrigin.join(', ');
                    placeOrigin = placeOrigin.join(', ');
                    restOrigin = restOrigin.join(', ');

                    $.ajax({
                        url: 'http://222.106.121.250/Template_02/top5_button.php',
                        type: 'POST',
                        traditional: true,
                        dataType: 'json',
                        data: {
                            "ctgrRest": restOrigin,
                            "ctgrAct": actOrigin,
                            "ctgrPlace": placeOrigin,
                            "station": station
                        },
                        success: function (data) {

                            // Change Current Station name
                            var stationName = document.getElementById("currentStation");
                            stationName.innerHTML = top5[4] + " Station";

                            // 1. Activities
                            var prev = document.getElementById("top5Act");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "top5Act");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;
                            if (data[0].length < 5) {
                                dataLen = data[0].length;
                            }

                            for (var i = 0; i < dataLen; i++) {
                                var listInput = document.createElement("button");
                                listInput.setAttribute("id", "Act" + i);
                                listInput.setAttribute("onclick", "location.href= '" + data[0][i][2] + "'");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + data[0][i][0]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 40px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            // 2. Places
                            var prev = document.getElementById("top5Place");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "top5Place");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;
                            if (data[1].length < 5) {
                                dataLen = data[1].length;
                            }

                            for (var i = 0; i < dataLen; i++) {
                                var listInput = document.createElement("button");
                                listInput.setAttribute("id", "Place" + i);
                                listInput.setAttribute("onclick", "location.href= '" + data[1][i][2] + "'");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + data[1][i][0]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 40px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            // 3. Restaurants
                            var prev = document.getElementById("top5Rest");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("div");
                            newone.setAttribute("id", "top5Rest");
                            newone.setAttribute("style", "align-content: center; width: 400px; height: 440px");

                            var dataLen = 5;
                            if (data[2].length < 5) {
                                dataLen = data[2].length;
                            }

                            for (var i = 0; i < dataLen; i++) {
                                var listInput = document.createElement("button");
                                listInput.setAttribute("id", "Rest" + i);
                                listInput.setAttribute("onclick", "location.href= '" + data[2][i][2] + "'");
                                listInput.setAttribute("value", '   Top ' + (i + 1) + ': ' + data[2][i][0]);
                                listInput.setAttribute("style", "font-family: 'Hanna'; font-size: 17px; color: snow; width: 250px; height: 50px; margin-left: 40px; margin-top: 30px; background-color: rgb(52, 52, 65); text-align: left; border: 0; outline: 0;");
                                listInput.innerHTML = listInput.value;
                                newone.appendChild(listInput);
                            }

                            parent.appendChild(newone);

                            // Reset containers
                            restOrigin = [];
                            actOrigin = [];
                            placeOrigin = [];

                            // 4. Pie chart
                            var countCategories = [];
                            for (var i = 0; i < data.length; i++) {
                                countCategories[i] = data[i].length;
                            }
                            var prev = document.getElementById("pieGraph");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("canvas");
                            newone.setAttribute("id", "pieGraph");
                            newone.setAttribute("style", "align-content: center; width: 220px; height: 388px; position: absolute; margin-left: 40px; margin-top: 52px;");
                            newone.setAttribute("width", "220");
                            newone.setAttribute("height", "388");                            parent.appendChild(newone);

                            var ex01 = document.getElementById("pieGraph").getContext('2d');
                            var chart01 = new Chart(ex01, {
                                type: 'pie',
                                data: {
                                    labels: ['Activities', 'Places', 'Restaurants'],
                                    datasets: [{
                                        data: countCategories,
                                        backgroundColor: [
                                            'rgba(135, 204, 193, 0.5)',
                                            'rgba(221, 142, 188, 0.5)',
                                            'rgba(228, 216, 150, 0.5)'
                                        ],
                                        borderColor: [
                                            'rgba(135, 204, 193, 1)',
                                            'rgba(221, 142, 188, 1)',
                                            'rgba(228, 216, 150, 1)'
                                        ],
                                        borderWidth: 1
                                    }
                                    ]
                                },
                                options: {
                                    responsive: false, // default value. false일 경우 포함된 div의 크기에 맞춰서 그려짐.
                                    legend: {
                                        labels: {
                                            fontColor: 'rgb(255, 250, 250)'
                                        }
                                    }
                                }
                            });

                            // 5. Word Cloud
                            var prev = document.getElementById("wordCloud");
                            var parent = prev.parentElement;
                            parent.removeChild(prev);

                            var newone = document.createElement("img");
                            newone.setAttribute("id", "wordCloud");
                            newone.setAttribute("src", "image/wordCloud/" + top5[4] + " Station.png");
                            newone.setAttribute("width", "400");
                            newone.setAttribute("height", "388");
                            newone.setAttribute("style", "align-content: center; width: 380px; height: 348px; position: absolute; margin-left: 310px; margin-top: 82px;");
                            parent.appendChild(newone);
                        },
                        error: function (request, status, error) {
                            alert("code:" + request.status + "\n" + "message:" + request.responseText + "\n" + "error:" + error);
                        }
                    })
                });
            })
        </script>
    </div>

    <!-- 우측 상위 5개역 요약 부분: 막대로 5개 뽑고 그 5개역에 대한 언급량 선 그래프 -->
    <div style="
    background-color: rgb(46, 46, 59);
    width: 600px;
    height: 1200px;
    float: right;
    ">
        <div style="
        width: 500px;
        height: 500px;
        border: 2px solid;
        border-color: rgb(172, 172, 172);
        margin-left: 48px;
        margin-top: 50px;
        position: absolute;
        ">
            <p style="text-align: center;">Bar chart: Station ~ Number of stores</p>
            <canvas id="barGraph" width="100%" style="align-content: center;">
                막대 그래프
            </canvas>
        </div>

        <div style="
        width: 500px;
        height: 500px;
        border: 2px solid;
        border-color: rgb(172, 172, 172);
        margin-left: 48px;
        margin-top: 646px;
        position: absolute;
        ">
            <p style="text-align: center;">Line chart: Weeks before now ~ Rate of mentions</p>
            <canvas id="lineGraph" width="100%" style="align-content: center;">
                선 그래프
            </canvas>
        </div>

    </div>

    <!-- 중간 부분: 막대로 뽑은 5개 표시 -> 선택시 해당 역 top5 리스트 출력 + 카테고리 비율 원형 차트 + 해당 역 키워드 클라우드 -->
    <div style="
    background-color: rgb(52, 52, 65);
    width: 1200px;
    height: 1200px;
    float: right;
    margin-right: 20px;
    ">
        <div style="
        width: 300px;
        height: 500px;
        border: 2px solid;
        border-color: rgb(172, 172, 172);
        margin-left: 48px;
        margin-top: 50px;
        position: absolute;
        ">
            <p style="text-align: center;">Top 5 Stations</p>
            <div id="contextList" width="100%" style="align-content: center;">
            </div>
        </div>

        <div style="
        width: 700px;
        height: 500px;
        border: 2px solid;
        border-color: rgb(172, 172, 172);
        margin-left: 448px;
        margin-top: 50px;
        position: absolute;
        ">
            <p style="text-align: center;" id="currentStation">Station Information</p>
            <p style="width: 300px; text-align: center; position: absolute; margin-left: 0px;">Proportion for Station
            </p>
            <p style="width: 400px; text-align: center; position: absolute; margin-left: 300px;">Word Cloud</p>
            <canvas id="pieGraph" width="50%"
                style="align-content: center; width: 300px; height: 388px; position: absolute; margin-left: 0px; margin-top: 52px;">
            </canvas>
            <canvas id="wordCloud" width="50%"
                style="align-content: center; width: 400px; height: 388px; position: absolute; margin-left: 300px; margin-top: 52px;">
            </canvas>
        </div>

        <div style="
        width: 300px;
        height: 500px;
        border: 2px solid;
        border-color: rgb(172, 172, 172);
        margin-left: 48px;
        margin-top: 646px;
        position: absolute;
        ">
            <p style="text-align: center;">Top 5 Restaurants</p>
            <div id="top5Rest" width="100%" style="align-content: center;">
            </div>
        </div>

        <div style="
        width: 300px;
        height: 500px;
        border: 2px solid;
        border-color: rgb(172, 172, 172);
        margin-left: 450px;
        margin-top: 646px;
        position: absolute;
        ">
            <p style="text-align: center;">Top 5 Activities</p>
            <div id="top5Act" width="100%" style="align-content: center;">
            </div>
        </div>

        <div style="
        width: 300px;
        height: 500px;
        border: 2px solid;
        border-color: rgb(172, 172, 172);
        margin-left: 852px;
        margin-top: 646px;
        position: absolute;
        ">
            <p style="text-align: center;">Top 5 Places</p>
            <div id="top5Place" width="100%" style="align-content: center;">
            </div>
        </div>

    </div>
</body>

</html>